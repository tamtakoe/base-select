!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var s in i)("object"==typeof exports?exports:e)[s]=i[s]}}(window,function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1);function n(e,t,i){for(void 0===t&&(t=document.body);e&&e.classList&&e.ownerDocument&&11!==e.nodeType;){if(i&&e.className.indexOf(i)>=0||!i&&e===t)return e;e=e.parentElement}}t.mergeWithDefaults=function(e,t,i){for(var s in void 0===t&&(t={}),void 0===i&&(i={}),t){var n=t[s];t.hasOwnProperty(s)&&(e[s]=null!=n?n:i[s])}return e},t.getElementContainer=n,t.bindFocusBlur=function(e,t){var i,s,r,o,l=e.parentNode;for(document.addEventListener("click",d,!0),e.addEventListener("mousedown",p,!0),e.addEventListener("blur",a,!0),t.addEventListener("focus",c,!0);l;){if(l.host){o=l.host;break}l=l.parentNode}function a(n){n&&n.target!==t||(r=!1,i=!1,s?r=!0:setTimeout(function(){e.dispatchEvent(new Event("blur"))}))}function c(){i||(i=!0,setTimeout(function(){e.dispatchEvent(new Event("focus"))}))}function p(){s=!0}function d(l){console.log("+++ clickHandler",!!n(l.target,e),l.target,l.target!==t,l.target.nodeName),s=!1;var c=o&&l.target===o?e:l.target,p=!!n(c,e);r&&!p&&a(),p&&c!==t&&setTimeout(function(){t.focus()}),!p&&i&&(i=!1)}return{element:e,inputElement:t,unbind:function(){document.removeEventListener("click",d,!0),e.removeEventListener("mousedown",p,!0),e.removeEventListener("blur",a,!0),t.removeEventListener("focus",c)}}},t.scrollActiveOption=function(e,t){var i,s,n,l,a,c;t&&(s=e.offsetHeight,n=function(e,t,i){var s="width"===t?e.offsetWidth:e.offsetHeight,n=window.getComputedStyle(e,null);if(s<=0||null==s){if(((s=n[t])<0||null==s)&&(s=e.style[t]),r.test(s))return s;s=parseFloat(s)||0}return s+function(e,t,i,s,n){var r=i===(s?"border":"content")?4:"width"===t?1:0,o=0,l=["Top","Right","Bottom","Left"];function a(e){return parseFloat(n[e])}for(;r<4;r+=2)"margin"===i&&(o+=a(i+l[r])),s?("content"===i&&(o-=a("padding"+l[r])),"margin"!==i&&(o-=a("border"+l[r]+"Width"))):(o+=a("padding"+l[r]),"padding"!==i&&(o+=a("border"+l[r]+"Width")));return o}(0,t,i||"content",!0,n)}(t,"height","margin"),l=e.scrollTop||0,a=i=o(t).top-o(e).top+l,c=i-s+n,i+n>s+l?e.scrollTop=c:i<l&&(e.scrollTop=a))};var r=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i");function o(e){var t,i,s=e.getBoundingClientRect(),n=e&&e.ownerDocument;if(n)return t=n.documentElement,i=function(e){return null!=e&&e===e.window?e:9===e.nodeType&&e.defaultView}(n),{top:s.top+i.pageYOffset-t.clientTop,left:s.left+i.pageXOffset-t.clientLeft}}function l(e,t,i){return void 0===i&&(i=!0),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?i?e===t:e==t:function(e,t,i){var s,n;if(null==e||null==t)return!1;if(e.prototype!==t.prototype)return!1;try{var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(r.sort(),o.sort(),s=r.length-1;s>=0;s--)if(r[s]!=o[s])return!1;for(s=r.length-1;s>=0;s--)if(n=r[s],!l(e[n],t[n],i))return!1;return typeof e==typeof t}catch(e){return!1}}(e,t,i))}function a(e){return String(void 0!==e?e:"")}t.hasNoSpaceBelowForMenu=function(e,t,i){void 0===i&&(i=100);var s=e.getBoundingClientRect().top,n=window.innerHeight-e.getBoundingClientRect().bottom;return n<(parseInt(window.getComputedStyle(t)["max-height"])||i)&&n<s},t.groupsIsEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t].length)return!1;return!0},t.intersection=function(e,t,i,s){var n,r,o,a,c=s?e.slice():[];for(n=0,o=e.length;n<e.length;n++)for(a=i?i(e[n]):e[n],r=0;r<t.length;r++)if(l(a,i?i(t[r]):t[r])){s?c.splice(n+c.length-o,1):c.push(t[r]);break}return c};var c=/[-\/\\^$*+?.()|[\]{}]/g,p="\\$&";function d(e){return e.replace(c,p)}function h(e,t,i){if(!t||"object"!=typeof e)return i?e:void 0;var s,n=t.split("."),r=e;for(s=0;s<n.length;++s){if(void 0==r[n[s]])return;r=r[n[s]]}return r}t.ascSort=function(e,t,i,s){void 0===s&&(s={});var n,r,o,l,c,p=[],u=[],m=[],f=s.sort,v=s.strict,y="desc"===f?-1:1,g=v?"":"i",L=[i];if(s.fields&&(L=s.fields.map(function(e){return"function"==typeof e?e:function(t){return h(t,e,!0)}})),i=L[0],""!==t&&i){var b=d(a(t)),E=new RegExp(b,g),I=new RegExp("^"+b,g);for(n=0,o=!1;n<e.length;n++){for(l=e[n],r=0;r<L.length;r++){var x=L[r](l);if(o=x===t||!v&&x==t||void 0!==t&&E.test(a(x)))break}o&&p.push(l)}if(f)c=p;else{for(n=0;n<p.length;n++)l=p[n],I.test(a(i(l)))?u.push(l):m.push(l);c=u.concat(m)}}else c=[].concat(e);return f&&(c=c.sort(function(e,t){return a(i(e)).localeCompare(a(i(t)))*y})),c},t.distributeOptionsByGroup=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=function(e){return""});for(var i,s,n={"":[]},r=0;r<e.length;r++)(s=n[i=t(e[r])||""])||(s=n[i]=[]),s.push(e[r]);return n},t.findIndex=function(e,t,i){void 0===e&&(e=[]),void 0===i&&(i=function(e){return e});for(var s=0;s<e.length;s++)if(i(e[s])===i(t))return s},t.removeChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.updateElements=function(e,t,i,n,r){var o,l,a,c=Array.from(e.children),p=function(e){var t=void 0!==e&&(n?n(e):e);if(t||0===t)return t},d=new Error("Uncountable element");return n?(a=c.map(function(e){return e.hasOwnProperty("data")?p(e.data):d}),o=[],l=new Map,t.forEach(function(e){var t=p(e);l.set(t,e),o.push(t)})):(a=c.map(function(e){return e.hasOwnProperty("data")?e.data:d}),o=t.slice()),a.forEach(function(e){e===d?o[r?"push":"unshift"](d):r=!0}),s.myer.diff(a,o).map(function(e){return e.hasOwnProperty(2)?e.map(function(e,t){return t<2?e:i(l?l.get(e):e)}):e}).forEach(function(t){t.hasOwnProperty(1)&&function(e,t,i){for(var s=e.children,n=0;n<i;n++)s[t].remove()}(e,t[0],t[1]),t.hasOwnProperty(2)&&function(e,t,i){var s=e.children;t?s[t-1].after.apply(s[t-1],i):e.prepend.apply(e,i)}(e,t[0],t.slice(2))}),e},t.deepReplace=function e(t,i,s){var n=function e(t){var i={};for(var s in t)null!=t[s]&&"object"==typeof t[s]?i[s]=e(t[s]):i[s]=t[s];return i}(s);return Object.keys(s).forEach(function(r){var o=s[r];o===t?n[r]=i:null!=o&&"object"==typeof o&&(n[r]=e(t,i,o))}),n},t.deepFind=h,t.highlight=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t="");var s=i?"<"+i+">$&</"+i+">":"<mark>$&</mark>",n=e;return(t=String(t)).length>0&&(e=String(e),t=d(t),n=e.replace(new RegExp(t,"gi"),s)),n},t.debounceEventValue=function(e,t){var i=null;return function(s){var n=this,r=s.target.value;i&&clearTimeout(i),i=setTimeout(function(){e.call(n,r),i=null},t)}},t.getItemsByField=function(e,t,i){return(e=Array.isArray(e)?e:[e]).map(function(e){return t.find(function(t){return i(t)===e})}).filter(function(e){return e})},t.noopPipe=function(e){return e},t.noop=function(e){};var u=function(){function e(){this.cache=[]}return e.prototype.get=function(e){return void 0===e&&(e=""),this.getValue(this.cache.find(function(t){return t.q===e}))},e.prototype.getLast=function(){return this.getValue(this.cache[0])},e.prototype.set=function(e,t){void 0===e&&(e=""),this.cache=this.cache.filter(function(t){return t.q!==e&&""===t.q}),this.cache.unshift({q:e,v:t,t:(new Date).getTime()})},e.prototype.clear=function(){this.cache=[]},e.prototype.getValue=function(e){if(e)return e.v},e}();t.QueryCache=u},function(e,t,i){"use strict";function s(){this.Diff_Timeout=1}Object.defineProperty(t,"__esModule",{value:!0});s.prototype.diff_main=function(e,t,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var s=i;if(null===e||null===t)throw new Error("Null input. (diff_main)");if(e===t)return e.length?[[0,e]]:[];var n=this.diff_commonPrefix(e,t),r=e.slice(0,n);e=e.slice(n),t=t.slice(n),n=this.diff_commonSuffix(e,t);var o=e.slice(e.length-n);e=e.slice(0,e.length-n),t=t.slice(0,t.length-n);var l=this.diff_compute_(e,t,s);return r.length&&l.unshift([0,r]),o.length&&l.push([0,o]),this.diff_cleanupMerge(l),l},s.prototype.diff_compute_=function(e,t,i){var s;if(!e.length)return[[1,t]];if(!t.length)return[[-1,e]];var n=e.length>t.length?e:t,r=e.length>t.length?t:e,o=this.find_csa(n,r);if(-1!==o)return s=[[1,n.slice(0,o)],[0,r],[1,n.slice(o+r.length)]],e.length>t.length&&(s[0][0]=s[2][0]=-1),s[0][1].length||s.shift(),s;if(1===r.length)return[[-1,e],[1,t]];var l=this.diff_halfMatch_(e,t);if(l){var a=l[0],c=l[1],p=l[2],d=l[3],h=l[4],u=this.diff_main(a,p,i),m=this.diff_main(c,d,i);return u.concat([[0,h]],m)}return this.diff_bisect_(e,t,i)},s.prototype.diff_bisect_=function(e,t,i){for(var s=e.length,n=t.length,r=Math.ceil((s+n)/2),o=r,l=2*r,a=new Array(l),c=new Array(l),p=0;p<l;p++)a[p]=-1,c[p]=-1;a[o+1]=0,c[o+1]=0;for(var d=s-n,h=d%2!=0,u=0,m=0,f=0,v=0,y=0;y<r&&!((new Date).getTime()>i);y++){for(var g=-y+u;g<=y-m;g+=2){for(var L=o+g,b=void 0,E=(b=g===-y||g!==y&&a[L-1]<a[L+1]?a[L+1]:a[L-1]+1)-g;b<s&&E<n&&e[b]===t[E];)b++,E++;if(a[L]=b,b>s)m+=2;else if(E>n)u+=2;else if(h){if((x=o+d-g)>=0&&x<l&&-1!==c[x])if(b>=(w=s-c[x]))return this.diff_bisectSplit_(e,t,b,E,i)}}for(var I=-y+f;I<=y-v;I+=2){for(var x=o+I,w=void 0,F=(w=I===-y||I!==y&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-I;w<s&&F<n&&e[s-w-1]===t[n-F-1];)w++,F++;if(c[x]=w,w>s)v+=2;else if(F>n)f+=2;else if(!h){if((L=o+d-I)>=0&&L<l&&-1!==a[L]){E=o+(b=a[L])-L;if(b>=(w=s-w))return this.diff_bisectSplit_(e,t,b,E,i)}}}}return[[-1,e],[1,t]]},s.prototype.diff_bisectSplit_=function(e,t,i,s,n){var r=e.slice(0,i),o=t.slice(0,s),l=e.slice(i),a=t.slice(s),c=this.diff_main(r,o,n),p=this.diff_main(l,a,n);return c.concat(p)},s.prototype.diff_commonPrefix=function(e,t){if(!e.length||!t.length||e[0]!==t[0])return 0;for(var i=0,s=Math.min(e.length,t.length),n=s,r=0;i<n;)e.slice(r,n)===t.slice(r,n)?r=i=n:s=n,n=Math.floor((s-i)/2+i);return n},s.prototype.diff_commonSuffix=function(e,t){if(!e.length||!t.length||e[e.length-1]!==t[t.length-1])return 0;for(var i=0,s=Math.min(e.length,t.length),n=s,r=0;i<n;)this.compare_arrays(e.slice(e.length-n,e.length-r),t.slice(t.length-n,t.length-r))?r=i=n:s=n,n=Math.floor((s-i)/2+i);return n},s.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var i=e.length>t.length?e:t,s=e.length>t.length?t:e;if(i.length<4||2*s.length<i.length)return null;var n=this;function r(e,t,i){for(var s,r,o,l,a=e.slice(i,i+Math.floor(e.length/4)),c=-1,p=[];-1!==(c=n.find_csa(t,a,c+1));){var d=n.diff_commonPrefix(e.slice(i),t.slice(c)),h=n.diff_commonSuffix(e.slice(0,i),t.slice(0,c));p.length<h+d&&((p=t.slice(c-h,c)).push.apply(p,t.slice(c,c+d)),s=e.slice(0,i-h),r=e.slice(i+d),o=t.slice(0,c-h),l=t.slice(c+d))}return 2*p.length>=e.length?[s,r,o,l,p]:null}var o,l,a,c,p,d=r(i,s,Math.ceil(i.length/4)),h=r(i,s,Math.ceil(i.length/2));return d||h?(o=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(l=o[0],a=o[1],c=o[2],p=o[3]):(c=o[0],p=o[1],l=o[2],a=o[3]),[l,a,c,p,o[4]]):null},s.prototype.diff_cleanupMerge=function(e){e.push([0,[]]);for(var t,i=0,s=0,n=0,r=[],o=[];i<e.length;)switch(e[i][0]){case 1:n++,o.push.apply(o,e[i][1]),i++;break;case-1:s++,r.push.apply(r,e[i][1]),i++;break;case 0:if(s+n>1){if(0!==s&&0!==n){if(0!==(t=this.diff_commonPrefix(o,r))){var l=e[i-s-n-1];i-s-n>0&&0===l[0]?l[1].push.apply(l[1],o.slice(0,t)):(e.splice(0,0,[0,o.slice(0,t)]),i++),o=o.slice(t),r=r.slice(t)}if(0!==(t=this.diff_commonSuffix(o,r)))(l=e[i][1]).unshift.apply(l,o.slice(o.length-t)),o=o.slice(0,o.length-t),r=r.slice(0,r.length-t)}0===s?e.splice(i-n,s+n,[1,o]):0===n?e.splice(i-s,s+n,[-1,r]):e.splice(i-s-n,s+n,[-1,r],[1,o]),i=i-s-n+(s?1:0)+(n?1:0)+1}else if(0!==i&&0===e[i-1][0]){var a=e[i-1][1],c=e[i][1];a.push.apply(a,c.splice(1,c.length)),e.splice(i,1)}else i++;n=0,s=0,r=[],o=[]}e[e.length-1][1].length||e.pop();var p=!1;for(i=1;i<e.length-1;){if(0===e[i-1][0]&&0===e[i+1][0])if(e[i][1].slice(e[i][1].length-e[i-1][1].length)===e[i-1][1])e[i][1]=e[i-1][1]+e[i][1].slice(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),p=!0;else if(e[i][1].slice(0,e[i+1][1].length)===e[i+1][1]){(a=e[i-1][1]).push.apply(a,e[i+1][1]),e[i][1]=e[i][1].slice(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),p=!0}i++}p&&this.diff_cleanupMerge(e)},s.prototype.find_csa=function(e,t,i){var s=i>>>0,n=t.length,r=e.length+1-n;e:for(;s<r;s++){for(var o=0;o<n;o++)if(e[s+o]!==t[o])continue e;return s}return-1},s.prototype.compare_arrays=function(e,t){var i=e.length;if(i!==t.length)return!1;for(;i--;)if(e[i]!==t[i])return!1;return!0},s.prototype.transform_to_splice_arguments=function(e){for(var t=[],i=0,s=0;i<e.length;i++){var n=e[i],r=[s];switch(n[0]){case 1:var o=n[1];r.push(0),r.push.apply(r,o),s+=o.length,t.push(r);break;case-1:r.push(n[1].length);var l=e[i+1];if(l&&1===l[0]){var a=l[1];r.push.apply(r,a),i++,s+=a.length}t.push(r);break;case 0:s+=n[1].length}}return t},s.prototype.diff=function(e,t,i){return this.transform_to_splice_arguments(this.diff_main(e,t,i))},t.myer=new s},function(e,t,i){"use strict";i.r(t),t.default='\x3c!--<div class="select-search">--\x3e\n    \x3c!--<div class="select-search-placeholder"></div>--\x3e\n    \x3c!--<div class="select-search-list">--\x3e\n        \x3c!--<div class="list">--\x3e\n            \x3c!--<div class="select-search-list-item select-search-list-item_selection">--\x3e\n                \x3c!--&lt;!&ndash; selected option text &ndash;&gt;--\x3e\n                \x3c!--<span class="close">×</span>--\x3e\n            \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n\n        \x3c!--<div class="select-search-list-item select-search-list-item_input"><span class="select-search-list-item_input-note"></span><input autocomplete="off"/></div>--\x3e\n        \x3c!--<div class="select-search-list-item select-search-list-item_loader"></div>--\x3e\n    \x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--<div class="select-dropdown">--\x3e\n    \x3c!--<div class="select-dropdown-custom"></div>--\x3e\n    \x3c!--<div class="select-dropdown-empty"></div>--\x3e\n    \x3c!--<div class="select-dropdown-list">--\x3e\n        \x3c!--<div class="select-dropdown-list-optgroup">--\x3e\n            \x3c!--<div class="select-dropdown-list-optgroup-header">--\x3e\n                \x3c!--&lt;!&ndash; list option header text &ndash;&gt;--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--<div class="select-dropdown-list-optgroup-option">--\x3e\n                \x3c!--&lt;!&ndash; list option text &ndash;&gt;--\x3e\n            \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n    \x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n\n\x3c!--<div class="select-search">--\x3e\n    \x3c!--<div class="select-search-placeholder"></div>--\x3e\n    \x3c!--<div class="select-search-list">--\x3e\n        \x3c!--<div class="select-search-list-item select-search-list-item_selection">--\x3e\n            \x3c!--&lt;!&ndash; selected option text &ndash;&gt;--\x3e\n            \x3c!--<span class="close">×</span>--\x3e\n        \x3c!--</div>--\x3e\n    \x3c!--</div>--\x3e\n    \x3c!--<div class="select-search-list-item select-search-list-item_input"><span class="select-search-list-item_input-note"></span><input autocomplete="off"/></div>--\x3e\n    \x3c!--<div class="select-search-list-item select-search-list-item_loader"></div>--\x3e\n\x3c!--</div>--\x3e\n\x3c!--<div class="select-dropdown">--\x3e\n    \x3c!--<div class="select-dropdown-custom"></div>--\x3e\n    \x3c!--<div class="select-dropdown-empty"></div>--\x3e\n    \x3c!--<div class="select-dropdown-list">--\x3e\n        \x3c!--<div class="select-dropdown-list-optgroup">--\x3e\n            \x3c!--<div class="select-dropdown-list-optgroup-header">--\x3e\n                \x3c!--&lt;!&ndash; list option header text &ndash;&gt;--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--<div class="select-dropdown-list-optgroup-option">--\x3e\n                \x3c!--&lt;!&ndash; list option text &ndash;&gt;--\x3e\n            \x3c!--</div>--\x3e\n        \x3c!--</div>--\x3e\n    \x3c!--</div>--\x3e\n\x3c!--</div>--\x3e\n\n\x3c!-- TODO use display: contents when full providing appears https://javascript.ru/forum/showthread.php?p=492068#post492068 --\x3e\n\n<div class="select-search">\n    <div class="select-search-placeholder"></div>\n    <div class="select-search-list">\n        <div class="select-search-list-item select-search-list-item_selection">\n            \x3c!-- selected option text --\x3e\n            <span class="close">×</span>\n        </div>\n        <div class="select-search-list-item select-search-list-item_info">123</div>\n        <div class="select-search-list-item select-search-list-item_input"><span class="select-search-list-item_input-note"></span><input autocomplete="off"/></div>\n        <div class="select-search-list-item select-search-list-item_loader"></div>\n    </div>\n</div>\n<div class="select-dropdown">\n    <div class="select-dropdown-custom"></div>\n    <div class="select-dropdown-empty"></div>\n    <div class="select-dropdown-list">\n        <div class="select-dropdown-list-optgroup">\n            <div class="select-dropdown-list-optgroup-header">\n                \x3c!-- list option header text --\x3e\n            </div>\n            <div class="select-dropdown-list-optgroup-option">\n                \x3c!-- list option text --\x3e\n            </div>\n        </div>\n    </div>\n</div>'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),n=i(0),r={select:"base-select",open:"open",multiple:"multiple",active:"active",focused:"focused",loading:"loading",removable:"removable",selected:"selected",readonly:"readonly",disabled:"disabled",limited:"limited",above:"above",hide:"hide",selectedItem:"select-search-list-item_selection",inputNote:"select-search-list-item_input-note",selectedItemRemove:"close",listItem:"select-dropdown-list-optgroup-option"},o=function(){function e(e,t){var i,o=this;this.paramsDefault={multiple:!1,readonly:!1,placeholder:"Select",multiplePlaceholder:"Add",emptyDropdownLabel:"Not found",openByRemove:!0,openByActiveRemove:!0,openByInputClick:!0,closeByRemove:!0,closeBySelect:!0,activeByOpen:!0,keepOpened:!1,removable:!1,hideSelected:!0,value:void 0,items:[],getItems:function(e,t){return[]},getItemsByValue:void 0,valueField:void 0,groupField:void 0,searchField:void 0,trackField:void 0,disabledField:void 0,dropdownItemLabelField:void 0,selectedItemLabelField:void 0,valueFieldGetter:n.noopPipe,searchFieldGetter:n.noopPipe,trackFieldGetter:n.noopPipe,disabledFieldGetter:n.noop,selectedItemLabelGetter:n.noopPipe,dropdownItemLabelGetter:n.noopPipe,groupLabelGetter:n.noopPipe,groupFieldGetter:function(e){return""},customAreaGetter:n.noop,infoGetter:function(e){return""},creatable:!1,createItemFn:n.noopPipe,removeItemFn:n.noopPipe,saveTrigger:"enter blur space . , ;",editable:!0,editItemFn:n.noopPipe,multipleVisibleLimit:1/0,multipleLimit:1/0,multipleLimitBlinkDelay:150,debounce:200,useCache:!0,rotateList:!0,position:void 0,debug:!1},this.params=Object.assign({},this.paramsDefault),this.selectedItems=[],this.tmpl={},this.isOpen=!1,this.isFocused=!1,this.isLoading=!1,this.isRemovable=!1,this.isEmpty=!1,this.isDisabled=!1,this.isReadonly=!1,this.isDropdownAbove=!1,this.unbindFocusBlur=n.noop,this.focusBlurInstance=null,this.searchFocusHandler=function(){o.setFocus(!0)},this.searchBlurHandler=function(){o.closeList(),o.setActiveSelectedElement(),o.insertListItems(),o.setFocus(!1),o.setQuery("")},this.searchInputHandler=n.debounceEventValue(function(e){o.searchChange(e)},this.params.debounce),this.searchKeydownHandler=function(e){o.searchKeydown(e)},this.searchContainerClickHandler=function(e){var t=n.getElementContainer(e.target,o.tmpl.dropdownContainer,r.selectedItem);if(t){var i=n.getElementContainer(e.target,t,r.selectedItemRemove);o.selectedItemClick(t,!!i)}else o.inputFieldClick()},this.listItemClickHandler=function(e){var t=n.getElementContainer(e.target,o.tmpl.dropdownContainer,r.listItem);t&&(o.listItemClick(t),setTimeout(function(){if(o.isOpen){var t=n.getElementContainer(document.elementFromPoint(e.pageX,e.pageY),o.tmpl.dropdownContainer,r.listItem)||o.getFirstListElement();t&&(o.setActiveListElement(t),console.log("setActiveListElement5",t))}}))},this.listItemMousemoveHandler=function(e){var t=n.getElementContainer(e.target,o.tmpl.dropdownContainer,r.listItem);t&&t!==o.activeListElement&&(o.setActiveListElement(t),console.log("setActiveListElement6",t))},this.stopImmediatePropagation=function(e){return e.stopImmediatePropagation()},t&&((i=document.createElement("style")).innerHTML=String(t),e.before(i));var l=document.createElement("div");l.innerHTML=String(s.default),this.elem=e,this.tmpl.searchContainer=l.querySelector(".select-search-list"),this.tmpl.searchPlaceholder=l.querySelector(".select-search-placeholder"),this.tmpl.selection=l.querySelector(".select-search-list-item_selection"),this.tmpl.selectionRemoveBtn=this.tmpl.selection.querySelector(".close"),this.tmpl.searchInputInfo=l.querySelector(".select-search-list-item_info"),this.tmpl.searchInputItem=l.querySelector(".select-search-list-item_input"),this.tmpl.searchInputNote=this.tmpl.searchInputItem.querySelector(".select-search-list-item_input-note"),this.tmpl.searchInput=this.tmpl.searchInputItem.querySelector("input"),this.tmpl.searchLoader=l.querySelector(".select-search-list-item_loader"),this.tmpl.dropdownContainer=l.querySelector(".select-dropdown-list"),this.tmpl.dropdownCustomArea=l.querySelector(".select-dropdown-custom"),this.tmpl.dropdownEmpty=l.querySelector(".select-dropdown-empty"),this.tmpl.optionGroup=l.querySelector(".select-dropdown-list-optgroup"),this.tmpl.optionGroupHeader=l.querySelector(".select-dropdown-list-optgroup-header"),this.tmpl.option=l.querySelector(".select-dropdown-list-optgroup-option"),this.tmpl.selection.remove(),this.tmpl.searchInputNote.remove(),this.tmpl.optionGroupHeader.remove(),this.tmpl.option.remove(),this.tmpl.optionGroup.remove(),this.elem.classList.add(r.select),n.removeChildren(this.elem),this.elem.prepend.apply(this.elem,l.children),this.addListeners()}return e.prototype.bindInput=function(e){void 0===e&&(e=this.tmpl.searchInput),this.focusBlurInstance&&this.focusBlurInstance.unbind(),this.focusBlurInstance=n.bindFocusBlur(this.elem,e)},e.prototype.addListeners=function(){this.elem.addEventListener("focus",this.searchFocusHandler),this.elem.addEventListener("blur",this.searchBlurHandler),this.tmpl.searchInput.addEventListener("input",this.searchInputHandler),this.tmpl.searchInput.addEventListener("keydown",this.searchKeydownHandler),this.tmpl.searchInput.addEventListener("change",this.stopImmediatePropagation),this.tmpl.searchContainer.addEventListener("click",this.searchContainerClickHandler),this.tmpl.dropdownContainer.addEventListener("click",this.listItemClickHandler),this.tmpl.dropdownContainer.addEventListener("mousemove",this.listItemMousemoveHandler),this.bindInput(this.tmpl.searchInput)},e.prototype.removeListeners=function(){this.elem.removeEventListener("focus",this.searchFocusHandler),this.elem.removeEventListener("blur",this.searchBlurHandler),this.tmpl.searchInput.removeEventListener("input",this.searchInputHandler),this.tmpl.searchInput.removeEventListener("keydown",this.searchKeydownHandler),this.tmpl.searchInput.removeEventListener("change",this.stopImmediatePropagation),this.tmpl.searchContainer.removeEventListener("click",this.searchContainerClickHandler),this.tmpl.dropdownContainer.removeEventListener("click",this.listItemClickHandler),this.tmpl.dropdownContainer.removeEventListener("mousemove",this.listItemMousemoveHandler),this.focusBlurInstance.unbind()},e.prototype.blinkRestriction=function(){var e=this;this.elem.classList.add(r.limited),setTimeout(function(){e.elem.classList.remove(r.limited)},this.params.multipleLimitBlinkDelay)},e.prototype.setDropdownAbove=function(e){this.elem.classList[e?"add":"remove"](r.above),this.isDropdownAbove=e},e.prototype.setFocus=function(e){this.elem.classList[e?"add":"remove"](r.focused),this.isFocused=e},e.prototype.setLoading=function(e){this.elem.classList[e?"add":"remove"](r.loading),this.isLoading=e},e.prototype.setElementLoading=function(e,t){e.classList[t?"add":"remove"](r.loading)},e.prototype.setRemovable=function(e){this.elem.classList[e?"add":"remove"](r.removable),this.isRemovable=e},e.prototype.setElementDisabled=function(e,t){e.classList[t?"add":"remove"](r.disabled)},e.prototype.isElementDisabled=function(e){return e.classList.contains(r.disabled)},e.prototype.setDisabled=function(e){e&&!this.isDisabled?(this.elem.setAttribute(r.disabled,"disabled"),this.tmpl.searchInput.setAttribute(r.disabled,"")):!e&&this.isDisabled&&(this.elem.removeAttribute(r.disabled),this.tmpl.searchInput.removeAttribute(r.disabled)),this.isDisabled=e},e.prototype.setReadonly=function(e){e&&!this.isReadonly?(this.elem.setAttribute(r.readonly,""),this.tmpl.searchInput.setAttribute(r.readonly,"")):!e&&this.isReadonly&&(this.elem.removeAttribute(r.readonly),this.tmpl.searchInput.removeAttribute(r.readonly)),this.isReadonly=e},e.prototype.openList=function(){this.isOpen||(this.params.position||this.setDropdownAbove(n.hasNoSpaceBelowForMenu(this.elem,this.tmpl.dropdownContainer)),this.isOpen=!0,this.elem.classList.add(r.open),this.params.activeByOpen&&this.setFirstActiveListElement(),this.elem.dispatchEvent(new Event("open")))},e.prototype.closeList=function(){var e=this;this.isOpen&&(this.isOpen=!1,setTimeout(function(){e.isOpen||(e.elem.classList.remove(r.open),console.log("Remove active item"),e.setActiveListElement(),e.elem.dispatchEvent(new Event("close")))}))},e.prototype.updatePlaceholder=function(){var e=this.params.multiple&&this.selectedItems.length;this.tmpl.searchInput.placeholder=(e?this.params.multiplePlaceholder:this.params.placeholder)||"",this.tmpl.searchPlaceholder.innerHTML=this.params.placeholder||""},e.prototype.setPlaceholder=function(e){void 0===e&&(e=""),this.tmpl.searchInput.placeholder=String(e)},e.prototype.setInputInfo=function(e){void 0===e&&(e=""),this.tmpl.searchInputInfo.innerHTML=String(e)},e.prototype.updateInputInfo=function(){this.setInputInfo(this.params.infoGetter(this.selectedItems.length-this.params.multipleVisibleLimit))},e.prototype.setDropdownLabel=function(e){void 0===e&&(e=""),this.tmpl.dropdownEmpty.innerHTML=String(e)},e.prototype.setEmpty=function(e){this.tmpl.dropdownEmpty.classList[e?"remove":"add"](r.hide),this.isEmpty=e},e.prototype.setQuery=function(e,t){void 0===e&&(e="");var i=this.focusBlurInstance.inputElement;i.value=String(e),t&&e&&!this.isReadonly&&i.setSelectionRange(0,e.length)},e.prototype.getQuery=function(){return this.focusBlurInstance.inputElement.value},e.prototype.isListElementSelected=function(e){return e.classList.contains(r.selected)},e.prototype.setListElementSelected=function(e){if(!e.classList.contains(r.selected))return e.classList.add(r.selected)||!0},e.prototype.unsetListElementSelected=function(e){if(e.classList.contains(r.selected))return e.classList.remove(r.selected)||!0},e.prototype.focus=function(){this.isFocused||this.isDisabled||this.focusBlurInstance.inputElement.focus()},e.prototype.blur=function(){this.isFocused&&!this.isDisabled&&this.focusBlurInstance.inputElement.blur()},e.prototype.setMultiple=function(e){this.elem.classList[e?"add":"remove"](r.multiple)},e.prototype.getSelectedItemElementByItem=function(e){var t=this.params.trackFieldGetter;return Array.from(this.tmpl.searchContainer.children).find(function(i){return i.data&&t(i.data)===t(e)})},e.prototype.getListElementByItem=function(e){for(var t=this.params.trackFieldGetter,i=this.tmpl.dropdownContainer.children,s=0;s<i.length;s++)if(this.isDataElement(i[s]))for(var n=i[s].children,r=0;r<n.length;r++)if(n[r].data&&t(n[r].data)===t(e))return n[r]},e.prototype.createListItemsGroupElement=function(e){var t=this.tmpl.optionGroup.cloneNode();if(t.data=e,e){var i=this.tmpl.optionGroupHeader.cloneNode();i.innerHTML=this.params.groupLabelGetter(e),t.appendChild(i)}return t},e.prototype.createListItemElement=function(e){var t=this.tmpl.option.cloneNode(),i=this.params.disabledFieldGetter(e);return t.innerHTML=this.params.dropdownItemLabelGetter(e),t.data=e,this.setElementDisabled(t,i),t},e.prototype.createSelectedItemElement=function(e){var t=this.tmpl.selection.cloneNode();return t.innerHTML=this.params.selectedItemLabelGetter(e)+this.tmpl.selectionRemoveBtn.outerHTML,t.data=e,t},e.prototype.postRenderSelectedElements=function(){if(this.params.multipleVisibleLimit!==1/0)for(var e=Array.from(this.tmpl.searchContainer.children).filter(function(e){return e.hasOwnProperty("data")}),t=0;t<e.length;t++)t<this.params.multipleVisibleLimit?e[t].classList.remove("hide"):e[t].classList.add("hide")},e.prototype.insertSelectedElements=function(e){void 0===e&&(e=[]),n.updateElements(this.tmpl.searchContainer,e,this.createSelectedItemElement.bind(this),this.params.trackFieldGetter,!0),this.postRenderSelectedElements()},e.prototype.insertSelectedElement=function(e){var t=this.createSelectedItemElement(e);t.data=e,this.tmpl.searchContainer.insertBefore(t,this.tmpl.searchInputInfo),this.postRenderSelectedElements()},e.prototype.removeElement=function(e){e.remove(),this.postRenderSelectedElements()},e.prototype.insertListItems=function(e,t){var i=this;void 0===e&&(e=[]),void 0===t&&(t="");var s=this.selectedItems.slice(),r=this.params.trackFieldGetter;this.params.hideSelected&&(e=n.intersection(e,s,r,!0)),this.setEmpty(!e.length);var o=n.ascSort(e,"",this.params.searchFieldGetter),l=n.distributeOptionsByGroup(o,this.params.groupFieldGetter),a=Object.keys(l).filter(function(e){return l[e].length}).sort(),c=n.updateElements(this.tmpl.dropdownContainer,a,this.createListItemsGroupElement.bind(this));return Array.from(c.children).forEach(function(e,o){if(void 0!==e.data){var a=l[e.data],c=n.updateElements(e,a,i.createListItemElement.bind(i),r);Array.from(c.children).map(function(e){e.data&&(e.innerHTML=i.params.dropdownItemLabelGetter(e.data,t),i.params.hideSelected||(s.some(function(t){return r(e.data)===r(t)})?i.setListElementSelected(e):i.unsetListElementSelected(e)))})}}),o},e.prototype.insertCustomArea=function(){var e=this.params.customAreaGetter.call(this);this.tmpl.dropdownCustomArea.innerHTML="",e&&this.tmpl.dropdownCustomArea.append(e)},e.prototype.setActiveSelectedElement=function(e){this.activeSelectedElement&&(this.activeSelectedElement.classList.remove(r.active),this.activeSelectedElement=null),e&&(e.classList.add(r.active),this.activeSelectedElement=e)},e.prototype.setActiveListElement=function(e){this.activeListElement&&(this.activeListElement.classList.remove(r.active),this.activeListElement=null),e&&this.isOpen&&(e.classList.add(r.active),this.activeListElement=e,n.scrollActiveOption(this.tmpl.dropdownContainer,e))},e.prototype.setFirstActiveListElement=function(){var e=this.isDropdownAbove?this.getLastListElement():this.getFirstListElement();this.setActiveListElement(e),console.log("setActiveListElement2",e)},e.prototype.setNextActiveListElement=function(e){try{var t=this.activeListElement;if(!t)return console.log("setActiveListElement3 --",this.isOpen),this.setActiveListElement((this.isDropdownAbove?!e:e)?this.getLastListElement():this.getFirstListElement());var i=this.getSiblingElement(t,e);if(!this.isDataElement(i)){var s=this.getSiblingElement(t.parentNode,e);this.isDataElement(s)?i=this.findFirstChildElementWithData(s,e):this.params.rotateList&&(i=e?this.getLastListElement():this.getFirstListElement())}this.isDataElement(i)&&(this.setActiveListElement(i),console.log("setActiveListElement4"))}catch(e){this.setFirstActiveListElement()}},e.prototype.setPreviousActiveListElement=function(){this.setNextActiveListElement(!0)},e.prototype.getSiblingElement=function(e,t){var i=t?"previousSibling":"nextSibling";do{e=e&&e[i]}while(e&&!this.isDataElement(e));return e},e.prototype.getFirstListElement=function(){var e=this.findFirstChildElementWithData(this.tmpl.dropdownContainer);return this.findFirstChildElementWithData(e)},e.prototype.getLastListElement=function(){var e=this.findLastChildElementWithData(this.tmpl.dropdownContainer);return this.findLastChildElementWithData(e)},e.prototype.findFirstChildElementWithData=function(e,t){if(e)for(var i=e.children.length,s=0,n=i-1;s<i;s++,n--){var r=t?n:s,o=e.children[r];if(this.isDataElement(o))return o}},e.prototype.findLastChildElementWithData=function(e){return this.findFirstChildElementWithData(e,!0)},e.prototype.isDataElement=function(e){return e&&1===e.nodeType&&void 0!==e.data&&!this.isElementDisabled(e)},e}();t.SelectDom=o},,function(e,t,i){},,function(e,t,i){},function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i(7),o=i(5),l=i(3),a=i(0),c=String(r)+String(o),p=function(e){function t(t,i){void 0===i&&(i={});var s=e.call(this,t,i.localStyle?!0===i.localStyle?String(c):i.localStyle:null)||this;return s.cache=new a.QueryCache,s.setParams(i),s}return n(t,e),t.prototype.setParams=function(e,t){var i=this;void 0===e&&(e={}),void 0===t&&(t=!0),console.log("setParams",e),a.mergeWithDefaults(this.params,e,this.paramsDefault);var s=function(t){return e.hasOwnProperty(t)},n=function(t){return e.hasOwnProperty(t)&&!e[t]};s("removable")&&(this.params.openByRemove=!e.removable),s("multiple")&&(this.params.openByRemove=!e.multiple,this.params.openByActiveRemove=!e.multiple),(s("multiple")||s("readonly"))&&(this.params.editable=!this.params.readonly&&!this.params.multiple),s("keepOpened")&&(this.params.openByRemove=e.keepOpened,this.params.closeByRemove=!e.keepOpened,this.params.closeBySelect=!e.keepOpened),s("openByRemove")&&(this.params.openByRemove=e.openByRemove),s("openByActiveRemove")&&(this.params.openByActiveRemove=e.openByActiveRemove),s("openByInputClick")&&(this.params.openByInputClick=e.openByInputClick),s("closeByRemove")&&(this.params.closeByRemove=e.closeByRemove),s("closeBySelect")&&(this.params.closeBySelect=e.closeBySelect),s("editable")&&(this.params.editable=e.editable),(n("valueFieldGetter")&&this.params.valueField||s("valueField"))&&(this.params.valueFieldGetter=function(e){return a.deepFind(e,i.params.valueField,!0)}),(n("groupFieldGetter")&&this.params.groupField||s("groupField"))&&(this.params.groupFieldGetter=function(e){return a.deepFind(e,i.params.groupField)}),(n("searchFieldGetter")&&this.params.searchField||s("searchField"))&&(this.params.searchFieldGetter=function(e){return a.deepFind(e,i.params.searchField,!0)}),(n("trackFieldGetter")&&(this.params.trackField||this.params.valueField)||s("trackField")||s("valueField"))&&(this.params.trackFieldGetter=function(e){return a.deepFind(e,i.params.trackField||i.params.valueField,!0)}),(n("disabledFieldGetter")&&this.params.disabledField||s("disabledField"))&&(this.params.disabledFieldGetter=function(e){return a.deepFind(e,i.params.disabledField)}),(n("dropdownItemLabelGetter")&&(this.params.dropdownItemLabelField||this.params.searchField)||!e.dropdownItemLabelGetter&&(s("dropdownItemLabelField")||s("searchField")))&&(this.params.dropdownItemLabelGetter=function(e,t){return a.highlight(a.deepFind(e,i.params.dropdownItemLabelField||i.params.searchField,!0),t)}),(n("selectedItemLabelGetter")&&(this.params.selectedItemLabelField||this.params.searchField)||!e.selectedItemLabelGetter&&(s("selectedItemLabelField")||s("searchField")))&&(this.params.selectedItemLabelGetter=function(e){return a.deepFind(e,i.params.selectedItemLabelField||i.params.searchField,!0)}),s("placeholder")&&!s("multiplePlaceholder")&&(this.params.multiplePlaceholder=e.placeholder),e.creatable&&!e.createItemFn&&(this.params.createItemFn="object"==typeof e.creatable?function(t){return a.deepReplace("$query",t,e.creatable)}:function(e){return e}),this.params.editable&&!e.editItemFn&&(this.params.editItemFn=function(e){return i.setQuery(e,!0)}),this.params.getItemsByValue||(this.params.getItemsByValue=function(e){return i.loadListItems().then(function(t){return a.getItemsByField(e,t,i.params.valueFieldGetter)})}),s("items")&&(this.params.getItems=function(t){var s;return"object"==typeof t&&t.hasOwnProperty("query")&&(s=t,t=t.query),a.ascSort(e.items||[],t,i.params.searchFieldGetter,s)});var r=!1,o=this.value;this.setDropdownLabel(this.params.emptyDropdownLabel),this.setRemovable(this.params.removable),this.setMultiple(this.params.multiple),this.setReadonly(this.params.readonly),this.setDisabled(this.params.disabled),this.setDropdownAbove("top"===this.params.position),this.updatePlaceholder(),(s("selectedItemLabelGetter")||s("selectedItemLabelField")||s("searchField")||s("searchFieldGetter"))&&this.selectedItems.length&&(this.insertSelectedElements([]),this.insertSelectedElements(this.selectedItems)),s("customAreaGetter")&&this.insertCustomArea(),s("activeByOpen")&&!e.activeByOpen&&(console.log("setActiveListElement1"),this.setActiveListElement()),(s("items")||s("getItems"))&&(this.cache.clear(),this.isOpen&&(this.insertListItems([]),this.updateDropdownListItems(""))),s("value")&&(o=e.value,r=!0),this.params.multiple&&!Array.isArray(o)&&(o=null!=o?[o]:[],r=!0),!this.params.multiple&&Array.isArray(o)&&(o=o[0],r=!0),r&&this.value!==o&&(this.value=o,this.setQuery(""),this.selectItems(this.params.multiple?o:null!=o?[o]:[]).then(this.updateInputInfo.bind(this)),t&&!s("value")&&this.dispatchValue())},t.prototype.open=function(){var e=this;this.isOpen||this.updateDropdownListItems("").then(function(t){e.openList(),!e.params.multiple&&e.selectedItems.length&&setTimeout(function(){e.params.editItemFn.call(e,e.params.searchFieldGetter(e.selectedItems[0]))})})},t.prototype.close=function(){this.params.multiple||this.params.editItemFn.call(this,""),this.isOpen&&this.closeList()},t.prototype.loadListItems=function(e){var t,i,s=this;if(this.setLoading(!0),this.params.useCache)t=this.cache.get(e);else{var n=void 0;"object"==typeof e&&e.hasOwnProperty("query")&&(n=e,e=e.query),i=a.ascSort(this.selectedItems,e,this.params.dropdownItemLabelGetter,n)}return this.loadItemsPromise=Promise.resolve(t||this.params.getItems(e,i)).then(function(t){return s.cache.set(e,t),s.loadItemsPromise=void 0,s.setLoading(!1),t}).catch(function(e){s.loadItemsPromise=void 0,s.setLoading(!1)}),this.loadItemsPromise},t.prototype.updateDropdownListItems=function(e){var t=this;return this.loadListItems(e).then(function(i){t.isDropdownAbove&&i.reverse(),t.insertListItems(i,e)})},t.prototype.saveOn=function(e){var t=this;if(console.log("--\x3e activeListElement",this.activeListElement),this.activeListElement)console.log(11111),this.selectItem(this.activeListElement),this.setNextActiveListElement();else if(this.params.creatable){var i=this.getQuery();if(!i)return;console.log(22222),this.setLoading(!0),Promise.resolve(this.params.createItemFn(i)).then(function(e){var i=t.createListItemElement(e);t.setLoading(!1),t.selectItem(i,!0),t.params.activeByOpen&&t.setNextActiveListElement()}).catch(function(e){t.setLoading(!1)})}},t.prototype.updateValue=function(){var e=this.params.valueField?this.selectedItems.map(this.params.valueFieldGetter):this.selectedItems,t=this.params.multiple?e.slice():e[0];this.value!==t&&(this.value=t,this.updatePlaceholder(),this.updateInputInfo(),this.dispatchValue())},t.prototype.dispatchValue=function(){var e=new Event("change");e.value=this.value,this.elem.dispatchEvent(e)},t.prototype.selectItems=function(e){var t=this;return Promise.resolve(this.params.valueField?this.params.getItemsByValue(e):e).then(function(e){t.updateSelectedElementList(e),t.isFocused&&t.updateDropdownListItems(t.focusBlurInstance.inputElement.value)})},t.prototype.selectItem=function(e,t){console.log("selectItem");var i=e.data;if(this.params.multipleLimit>=0&&this.selectedItems.length>=this.params.multipleLimit)this.blinkRestriction();else{if(!this.params.hideSelected&&this.isListElementSelected(e)){var s=this.getSelectedItemElementByItem(i);return this.unsetListElementSelected(e),void this.deselectItem(s,!0)}this.params.multiple?this.setActiveSelectedElement():(this.deselectAllItems(),this.setQuery("")),t&&this.setQuery(""),this.addToSelectedElementList(i),this.isOpen&&this.params.closeBySelect?(this.close(),this.setQuery("")):(this.insertListItems(this.cache.get(this.getQuery())),this.params.useCache||this.updateDropdownListItems(this.getQuery())),this.updateValue()}},t.prototype.deselectItem=function(e,t){var i=this,s=this.params.editable&&this.params.multiple;if(!this.params.multiple&&this.isReadonly)return this.setActiveSelectedElement(),t&&(this.removeSelectedItem(e),this.setActiveSelectedElement(),setTimeout(function(){i.setQuery("")})),void this.open();s&&e&&setTimeout(function(){i.params.editItemFn.call(i,i.params.searchFieldGetter(e.data))}),t||e===this.activeSelectedElement||s?(this.removeSelectedItem(e),this.setActiveSelectedElement()):(this.setActiveSelectedElement(e),this.params.openByActiveRemove&&this.open())},t.prototype.deselectAllItems=function(){this.updateSelectedElementList([])},t.prototype.updateSelectedElementList=function(e){void 0===e&&(e=[]),this.selectedItems=e,this.insertSelectedElements(e)},t.prototype.addToSelectedElementList=function(e){this.selectedItems.push(e),this.insertSelectedElement(e)},t.prototype.removeSelectedItem=function(e){var t=this;if(e){var i=e.data;this.setElementLoading(e,!0),Promise.resolve(this.params.removeItemFn(i)).then(function(s){var n=a.findIndex(t.selectedItems,i,t.params.trackFieldGetter);if(t.setElementLoading(e,!1),t.selectedItems.splice(n,1),t.removeElement(e),t.params.hideSelected)t.insertListItems(t.cache.getLast());else{var r=t.getListElementByItem(i);t.isListElementSelected(r)&&t.unsetListElementSelected(r)}!t.isOpen&&t.params.openByRemove&&t.open(),t.isOpen&&t.params.closeByRemove&&t.close(),t.updateValue()}).catch(function(i){console.log("E",i),t.setElementLoading(e,!1)})}},t.prototype.selectedItemClick=function(e,t){this.isDisabled||this.params.multiple&&this.params.removable&&!t||(this.params.multiple&&!this.params.removable&&(t=!0),this.deselectItem(e,t),this.dispatchCustomInputEvent())},t.prototype.listItemClick=function(e){this.isDisabled||this.isElementDisabled(e)||(this.selectItem(e),this.dispatchCustomInputEvent())},t.prototype.inputFieldClick=function(){this.isDisabled||!this.params.openByInputClick||!this.params.multiple&&this.selectedItems.length||this.open()},t.prototype.searchChange=function(e){this.closeList(),this.updateDropdownListItems(e).then(this.openList.bind(this))},t.prototype.searchKeydown=function(e){switch(e.key){case"ArrowUp":this.isOpen?this.setPreviousActiveListElement():this.open();break;case"ArrowDown":this.isOpen?this.setNextActiveListElement():this.open();break;case"ArrowLeft":case"ArrowRight":break;case"Tab":this.saveOn("tab");break;case"Enter":this.saveOn("enter"),e.preventDefault();break;case"Escape":this.blur();break;case"Backspace":if(!this.tmpl.searchInput.value){var t=this.findLastChildElementWithData(this.tmpl.searchContainer);this.deselectItem(t);break}default:this.params.multiple&&this.setActiveSelectedElement()}},t.prototype.dispatchCustomInputEvent=function(){},t}(l.SelectDom);t.Select=p}])});
//# sourceMappingURL=select.js.map